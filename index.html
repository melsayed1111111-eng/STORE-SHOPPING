<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHOPPING</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Ù…ÙƒØªØ¨Ø§Øª ÙÙŠØ±Ø¨Ø§Ø³ -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <style>
        :root {
            --primary: #232f3e;
            /* Ù„ÙˆÙ† Ø£Ù…Ø§Ø²ÙˆÙ† Ø§Ù„ØºØ§Ù…Ù‚ Ù„Ù„Ù‡ÙŠØ¯Ø± */
            --secondary: #febd69;
            /* Ø£ØµÙØ± Ø£Ù…Ø§Ø²ÙˆÙ† */
            --green-brand: #2e7d32;
            /* Ø£Ø®Ø¶Ø± Ø²Ø±Ø§Ø¹ÙŠ */
            --light: #f3f3f3;
            --dark: #111;
            --white: #fff;
            --shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #eaeded;
            color: var(--dark);
        }

        /* --- Header Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ --- */
        header {
            background-color: var(--primary);
            color: white;
            padding: 10px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-main {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            height: 60px;
            gap: 20px;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .logo span {
            color: var(--secondary);
        }

        .search-bar {
            flex-grow: 1;
            display: flex;
            max-width: 800px;
            border-radius: 4px;
            overflow: hidden;
        }

        .search-bar input {
            width: 100%;
            padding: 10px;
            border: none;
            outline: none;
        }

        .search-bar button {
            background: var(--secondary);
            border: none;
            padding: 0 20px;
            cursor: pointer;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .search-bar button:hover {
            background: #f3a847;
        }

        .nav-icons {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .nav-item {
            color: white;
            text-decoration: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8rem;
            cursor: pointer;
            position: relative;
        }

        .nav-item i {
            font-size: 1.4rem;
            margin-bottom: 2px;
        }

        .nav-item span {
            font-weight: bold;
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--secondary);
            color: var(--primary);
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ø³ÙÙ„ÙŠ */
        .sub-header {
            background-color: #37475a;
            color: white;
            padding: 8px 20px;
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .cat-link {
            cursor: pointer;
            white-space: nowrap;
        }

        .cat-link:hover {
            text-decoration: underline;
            color: var(--secondary);
        }

        /* --- Slider Ø§Ø­ØªØ±Ø§ÙÙŠ --- */
        .slider-container {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            background: linear-gradient(to bottom, #eaeded00 70%, #eaeded 100%);
            /* ØªØ¯Ø±Ø¬ Ù„Ø¯Ù…Ø¬ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± Ù…Ø¹ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease;
            background-size: cover;
            background-position: center;
        }

        .slide.active {
            opacity: 1;
        }

        /* ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ¯Ø±Ø¬ ÙÙˆÙ‚ Ø§Ù„ØµÙˆØ±Ø© */
        .slide::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to right, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 50%);
        }

        .slide-content {
            position: absolute;
            top: 50%;
            right: 5%;
            transform: translateY(-50%);
            z-index: 2;
            color: white;
            max-width: 500px;
            text-align: right;
        }

        .slide-content h2 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .slide-content p {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .slide-btn {
            padding: 10px 30px;
            background: var(--secondary);
            color: var(--primary);
            border: none;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            font-size: 1.1rem;
        }

        /* --- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª --- */
        .main-container {
            padding: 20px;
            max-width: 1400px;
            margin: -50px auto 0;
            position: relative;
            z-index: 10;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            transition: 0.3s;
            border: 1px solid #ddd;
            height: 100%;
        }

        .card:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .card-img {
            width: 100%;
            height: 200px;
            object-fit: contain;
            margin-bottom: 10px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
            line-height: 1.3;
            height: 45px;
            overflow: hidden;
        }

        .merchant-badge {
            font-size: 0.8rem;
            color: #565959;
            margin-bottom: 5px;
        }

        .merchant-badge i {
            color: var(--green-brand);
        }

        .price {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .price span {
            font-size: 0.8rem;
            vertical-align: top;
        }

        .btn-add {
            background: #f7ca00;
            border: 1px solid #fcd200;
            padding: 8px;
            width: 100%;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            margin-top: auto;
        }

        .btn-add:hover {
            background: #f3a847;
        }

        /* --- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ (Ù†ÙˆØ§ÙØ° Ù…Ù†Ø¨Ø«Ù‚Ø©) --- */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            left: 20px;
            top: 20px;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .btn-primary {
            background: var(--green-brand);
            color: white;
            border: none;
            padding: 10px 20px;
            width: 100%;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.1rem;
        }

        .btn-instapay {
            background: #5a2d81;
            color: white;
            border: none;
            padding: 10px;
            width: 100%;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
        }

        /* --- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªØ§Ø¬Ø± --- */
        .merchant-panel {
            background: white;
            padding: 20px;
            margin: 20px auto;
            max-width: 1000px;
            border-radius: 8px;
            display: none;
            border-top: 5px solid var(--green-brand);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        /* --- Ø§Ù„ÙÙˆØªØ± --- */
        footer {
            background: var(--primary);
            color: #ddd;
            padding: 40px 0;
            margin-top: 50px;
            text-align: center;
            font-size: 0.9rem;
        }

        .footer-link {
            color: white;
            text-decoration: none;
            margin: 0 10px;
        }

        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ */
        .paywall-msg {
            text-align: center;
            border: 2px dashed var(--green-brand);
            padding: 20px;
            border-radius: 10px;
            background: #f1f8e9;
            margin-top: 20px;
        }

        .instapay-logo {
            width: 100px;
            margin: 10px auto;
            display: block;
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header>
        <div class="header-main">
            <a href="#" class="logo"><i class="fas fa-leaf" style="color:var(--green-brand)"></i> GREEN
                <span>SHOPPING</span></a>

            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ØŒ Ø¨Ø°ÙˆØ±ØŒ Ù…Ø¹Ø¯Ø§Øª...">
                <button onclick="searchProduct()"><i class="fas fa-search"></i></button>
            </div>

            <div class="nav-icons">
                <div class="nav-item" onclick="checkMerchantStatus()">
                    <span id="userGreeting">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
                    <span style="font-weight:bold">Ø­Ø³Ø§Ø¨ÙŠ / Ø¨ÙŠØ¹ Ù…Ø¹Ù†Ø§</span>
                </div>
                <div class="nav-item" onclick="openModal('cartModal')">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge" id="cartCount">0</span>
                </div>
            </div>
        </div>

        <div class="sub-header" id="categoryFilters">
            <!-- Ø§Ù„ÙØ¦Ø§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
        </div>
    </header>

    <!-- Slider -->
    <div class="slider-container" id="slider">
        <div class="slide active"
            style="background-image: url('https://images.unsplash.com/photo-1625246333195-f8196812c850?auto=format&fit=crop&w=1600&q=80');">
            <div class="slide-content">
                <h2>Ù…Ù†ØµØ© Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ø£ÙˆÙ„</h2>
                <p>ÙƒÙ„ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡ Ø£Ø±Ø¶Ùƒ ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯</p>
                <button class="slide-btn" onclick="document.querySelector('.main-container').scrollIntoView()">ØªØ³ÙˆÙ‚
                    Ø§Ù„Ø¢Ù†</button>
            </div>
        </div>
        <div class="slide"
            style="background-image: url('https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8?auto=format&fit=crop&w=1600&q=80');">
            <div class="slide-content">
                <h2>Ø§Ù†Ø¶Ù… ÙƒØªØ¬Ø§Ø± Ø§Ù„Ø¢Ù†</h2>
                <p>Ø§Ø¹Ø±Ø¶ Ù…Ù†ØªØ¬Ø§ØªÙƒ Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© Ù„Ø¢Ù„Ø§Ù Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</p>
                <button class="slide-btn" onclick="openModal('registerModal')">Ø§Ø´ØªØ±Ùƒ ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªØ§Ø¬Ø± (ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) -->
        <div id="merchantDashboard" class="merchant-panel">
            <div class="panel-header">
                <h2 id="dashTitle">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªØ§Ø¬Ø±</h2>
                <button onclick="logout()"
                    style="background:#c62828; color:white; border:none; padding:5px 15px; border-radius:4px; cursor:pointer">Ø®Ø±ÙˆØ¬</button>
            </div>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
                <div>
                    <h3><i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                    <form id="productForm" onsubmit="handleProductSubmit(event)" style="margin-top:15px">
                        <div class="form-group"><input type="text" id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" required></div>
                        <div class="form-group"><input type="number" id="pPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± (Ø¬Ù†ÙŠÙ‡)" required>
                        </div>
                        <div class="form-group"><input type="text" id="pImg" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© (URL)" required>
                        </div>
                        <div class="form-group">
                            <select id="pCat" required>
                                <option value="Ø¨Ø°ÙˆØ±">Ø¨Ø°ÙˆØ±</option>
                                <option value="Ø£Ø³Ù…Ø¯Ø©">Ø£Ø³Ù…Ø¯Ø©</option>
                                <option value="Ù…Ø¨ÙŠØ¯Ø§Øª">Ù…Ø¨ÙŠØ¯Ø§Øª</option>
                                <option value="Ù…Ø¹Ø¯Ø§Øª">Ù…Ø¹Ø¯Ø§Øª</option>
                            </select>
                        </div>
                        <div class="form-group"><textarea id="pDesc" rows="2" placeholder="ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬"
                                required></textarea></div>
                        <button type="submit" class="btn-primary">Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬</button>
                    </form>
                </div>
                <div>
                    <h3><i class="fas fa-box-open"></i> Ù…Ù†ØªØ¬Ø§ØªÙŠ</h3>
                    <div style="max-height:300px; overflow-y:auto; margin-top:10px" id="myProductsList">
                        <!-- Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ø¬Ø± -->
                    </div>
                </div>
            </div>
        </div>

        <h2 style="margin-bottom:20px; border-bottom:2px solid #ddd; padding-bottom:10px">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
        <div class="products-grid" id="productsContainer"></div>
    </div>

    <!-- Footer -->
    <footer>
        <h3>SHOPPING MARKETPLACE</h3>
        <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2025</p>
        <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹: 01120194940</p>
    </footer>

    <!-- Modals -->

    <!-- Login/Register Choice -->
    <div id="authModal" class="modal">
        <div class="modal-content" style="text-align:center">
            <span class="close-modal" onclick="closeModal('authModal')">&times;</span>
            <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ SHOPPING</h2>
            <p style="margin:15px 0; color:#555">Ù„Ø¨ÙŠØ¹ Ù…Ù†ØªØ¬Ø§ØªÙƒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ ØªØ§Ø¬Ø±</p>
            <button class="btn-primary" onclick="openModal('loginModal'); closeModal('authModal')"
                style="margin-bottom:10px">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ (ØªØ¬Ø§Ø±)</button>
            <button class="btn-primary" onclick="openModal('registerModal'); closeModal('authModal')"
                style="background:var(--secondary); color:var(--dark)">ØªØ³Ø¬ÙŠÙ„ Ø­Ø³Ø§Ø¨ ØªØ§Ø¬Ø± Ø¬Ø¯ÙŠØ¯</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('loginModal')">&times;</span>
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„ØªØ§Ø¬Ø±</h2>
            <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label><input type="text" id="loginUser"></div>
            <div class="form-group"><label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label><input type="password" id="loginPass"></div>
            <button class="btn-primary" onclick="loginMerchant()">Ø¯Ø®ÙˆÙ„</button>
            <p style="margin-top:10px; font-size:0.9rem">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#"
                    onclick="closeModal('loginModal'); openModal('registerModal')">Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†</a></p>
        </div>
    </div>

    <!-- Register & Payment Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('registerModal')">&times;</span>
            <h2 id="regTitle">Ø§Ø´ØªØ±Ø§Ùƒ ØªØ§Ø¬Ø± Ø¬Ø¯ÙŠØ¯</h2>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
            <div id="step1">
                <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± (Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯)</label><input type="text" id="regShopName"
                        placeholder="Ø§Ø³Ù… Ù…Ø­Ù„Ùƒ"></div>
                <div class="form-group"><label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label><input type="tel" id="regPhone"
                        placeholder="01xxxxxxxxx"></div>
                <div class="form-group"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù„Ù„Ø¯Ø®ÙˆÙ„)</label><input type="text" id="regUser"
                        placeholder="username"></div>
                <div class="form-group"><label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label><input type="password" id="regPass"
                        placeholder="******"></div>
                <!-- ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø²Ø± Ù„ÙŠÙ…Ø±Ø± Ø§Ù„Ø­Ø¯Ø« event -->
                <button class="btn-primary" id="nextBtn" onclick="goToPayment(event)">Ø§Ù„ØªØ§Ù„ÙŠ: Ø¯ÙØ¹ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ</button>
            </div>

            <!-- Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„Ø¯ÙØ¹ -->
            <div id="step2" style="display:none">
                <div class="paywall-msg">
                    <img src="https://instapay.eg/wp-content/uploads/2022/04/instapay-logo.png" class="instapay-logo"
                        alt="Instapay" style="width: 120px;">
                    <h3 style="color:#5a2d81">ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨ Ø§Ù„ØªØ§Ø¬Ø±</h3>
                    <p>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ: <strong style="font-size:1.2rem">100 Ø¬Ù†ÙŠÙ‡</strong></p>

                    <div
                        style="background:white; padding:10px; border:1px solid #ddd; margin:10px 0; border-radius:5px;">
                        <p style="margin:0; font-size:0.9rem">Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø¥Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</p>
                        <h2 style="color:var(--green-brand); letter-spacing:2px; margin:5px 0"
                            onclick="navigator.clipboard.writeText('01120194940'); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ù‚Ù…')">01120194940 <i
                                class="far fa-copy" style="font-size:0.6em; cursor:pointer"></i></h2>
                    </div>

                    <!-- Ø²Ø± Ù…Ø­Ø§ÙˆÙ„Ø© ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
                    <a href="https://play.google.com/store/apps/details?id=com.egyptianbanks.instapay" target="_blank"
                        style="display:block; text-decoration:none; background:#eee; padding:8px; border-radius:5px; color:#333; font-size:0.9rem; margin-bottom:10px">
                        <i class="fas fa-external-link-alt"></i> ÙØªØ­/ØªØ­Ù…ÙŠÙ„ Ø¥Ù†Ø³ØªØ§Ø¨Ø§ÙŠ
                    </a>
                </div>

                <div class="form-group" style="margin-top:15px">
                    <label>Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Reference ID):</label>
                    <input type="text" id="paymentRef" placeholder="Ù…Ø«Ø§Ù„: 123456789"
                        style="border-color:var(--green-brand)">
                </div>
                <button class="btn-instapay" onclick="completeRegistration()">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                <button
                    onclick="document.getElementById('step2').style.display='none'; document.getElementById('step1').style.display='block'"
                    style="background:none; border:none; color:#555; margin-top:10px; cursor:pointer; text-decoration:underline">Ø±Ø¬ÙˆØ¹
                    Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('cartModal')">&times;</span>
            <h2><i class="fas fa-shopping-cart"></i> Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
            <div id="cartItems" style="margin:20px 0"></div>
            <div style="font-weight:bold; font-size:1.2rem;">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="cartTotal">0</span> Ø¬Ù†ÙŠÙ‡</div>
            <hr style="margin:15px 0">
            <h3>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h3>
            <form onsubmit="checkout(event)">
                <div class="form-group"><input type="text" id="cName" placeholder="Ø§Ù„Ø§Ø³Ù…" required></div>
                <div class="form-group"><input type="tel" id="cPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required></div>
                <div class="form-group"><input type="text" id="cAddress" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„" required></div>
                <button type="submit" class="btn-primary"
                    style="background:#f0c14b; color:#111; border:1px solid #a88734"><i class="fab fa-whatsapp"></i>
                    ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
            </form>
        </div>
    </div>

    <script>
        // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠØ±Ø¨Ø§Ø³ (Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚) ---
        const firebaseConfig = {
            apiKey: "AIzaSyBVPsSkWgHqdrQaUwJVcAlWb3iCsrjkgJs",
            authDomain: "store-shopping-a6267.firebaseapp.com",
            databaseURL: "https://store-shopping-a6267-default-rtdb.firebaseio.com",
            projectId: "store-shopping-a6267",
            storageBucket: "store-shopping-a6267.firebasestorage.app",
            messagingSenderId: "362918176320",
            appId: "1:362918176320:web:20de76e9d12e05c6c861a5",
            measurementId: "G-0QQSFTG6EP"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ---
        let products = [];
        let currentUser = null; // Ù„ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø¬Ø± Ø§Ù„Ù…Ø³Ø¬Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹
        let cart = [];

        // Ø±Ù‚Ù… Ù…Ø³Ø¤ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ© (Ø§Ù„Ø°ÙŠ ÙŠØªÙ„Ù‚Ù‰ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆÙŠÙˆØ¬Ù‡Ù‡Ø§)
        const ADMIN_PHONE = "01120194940";

        // --- Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ---
        document.addEventListener("DOMContentLoaded", () => {
            initSlider();
            loadProducts();

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ØªØ§Ø¬Ø± Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ© (Simple Session)
            const savedUser = sessionStorage.getItem('greenUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserUI();
            }
        });

        // --- Ø¬Ù„Ø¨ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ---
        function loadProducts() {
            db.ref('products').on('value', snapshot => {
                const data = snapshot.val();
                products = data ? Object.values(data) : [];
                renderProducts(products);
                if (currentUser) renderMyProducts(); // ØªØ­Ø¯ÙŠØ« Ù„ÙˆØ­Ø© Ø§Ù„ØªØ§Ø¬Ø±
            });
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ø±Ø¶ (Slider & Products) ---
        function initSlider() {
            const slides = document.querySelectorAll('.slide');
            let current = 0;
            setInterval(() => {
                slides[current].classList.remove('active');
                current = (current + 1) % slides.length;
                slides[current].classList.add('active');
            }, 5000);
        }

        function renderProducts(list) {
            const container = document.getElementById('productsContainer');
            container.innerHTML = '';
            list.forEach(p => {
                container.innerHTML += `
                    <div class="card">
                        <img src="${p.img}" class="card-img" alt="${p.name}" onerror="this.src='https://via.placeholder.com/200?text=No+Image'">
                        <div class="card-body">
                            <div class="card-title">${p.name}</div>
                            <div class="merchant-badge"><i class="fas fa-store"></i> Ø¨ÙŠØ¹ Ø¨ÙˆØ§Ø³Ø·Ø©: ${p.shopName || 'Green Golden'}</div>
                            <div class="price">${p.price} <span>Ø¬.Ù…</span></div>
                            <button class="btn-add" onclick="addToCart('${p.id}')">Ø£Ø¶Ù Ù„Ù„Ø¹Ø±Ø¨Ø©</button>
                        </div>
                    </div>
                `;
            });
        }

        function searchProduct() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = products.filter(p => p.name.toLowerCase().includes(query) || (p.cat && p.cat.includes(query)));
            renderProducts(filtered);
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø§Ø´ØªØ±Ø§Ùƒ (The Logic) ---

        function checkMerchantStatus() {
            if (currentUser) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¬Ù„Ø§Ù‹ØŒ Ø§ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Scroll to dashboard)
                document.getElementById('merchantDashboard').style.display = 'block';
                document.getElementById('merchantDashboard').scrollIntoView({ behavior: 'smooth' });
            } else {
                // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…Ø³Ø¬Ù„Ø§Ù‹ØŒ Ø§ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
                openModal('authModal');
            }
        }

        function goToPayment(e) {
            // Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
            if (e) e.preventDefault();

            const name = document.getElementById('regShopName').value;
            const phone = document.getElementById('regPhone').value;
            const user = document.getElementById('regUser').value;
            const pass = document.getElementById('regPass').value;
            const btn = document.getElementById('nextBtn'); // Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ Ø¨Ø§Ù„Ø²Ø±

            if (!name || !phone || !user || !pass) {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙØ¹");
                return;
            }

            // ØªØºÙŠÙŠØ± Ù†Øµ Ø§Ù„Ø²Ø± Ù„ÙŠØ¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ù† Ù‡Ù†Ø§Ùƒ Ø¹Ù…Ù„ÙŠØ© ØªØªÙ…
            const originalText = btn.innerText;
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
            btn.disabled = true;
            btn.style.opacity = "0.7";

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ù… ØªÙƒØ±Ø§Ø± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ ÙÙŠØ±Ø¨Ø§Ø³
            db.ref('merchants/' + user).once('value')
                .then(snapshot => {
                    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø²Ø± Ù„Ø­Ø§Ù„ØªÙ‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©
                    btn.innerText = originalText;
                    btn.disabled = false;
                    btn.style.opacity = "1";

                    if (snapshot.exists()) {
                        alert("Ø¹ÙÙˆØ§Ù‹ØŒ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹. ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ø³Ù… Ø¢Ø®Ø±.");
                    } else {
                        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ© (Ø§Ù„Ø¯ÙØ¹)
                        document.getElementById('step1').style.display = 'none';
                        document.getElementById('step2').style.display = 'block';
                        document.getElementById('regTitle').innerText = "Ø®Ø·ÙˆØ© Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ØªÙØ¹ÙŠÙ„";
                    }
                })
                .catch(error => {
                    // ÙÙŠ Ø­Ø§Ù„Ø© ÙˆØ¬ÙˆØ¯ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„
                    console.error(error);
                    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: " + error.message + "\nØªØ£ÙƒØ¯ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
                    btn.innerText = originalText;
                    btn.disabled = false;
                    btn.style.opacity = "1";
                });
        }

        function completeRegistration() {
            const ref = document.getElementById('paymentRef').value;
            if (!ref) { alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­ÙˆÙŠÙ„"); return; }

            // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø¬Ø±
            const shopName = document.getElementById('regShopName').value;
            const phone = document.getElementById('regPhone').value;
            const user = document.getElementById('regUser').value;
            const pass = document.getElementById('regPass').value;

            const merchantData = {
                shopName: shopName,
                phone: phone,
                password: pass, // ØªØ­Ø°ÙŠØ±: ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØ¬Ø¨ ØªØ´ÙÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                username: user,
                paymentRef: ref,
                status: 'active', // Ù†ÙØªØ±Ø¶ Ø§Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ø¹Ø¯ ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙˆØ¯
                joinDate: new Date().toLocaleDateString()
            };

            // Ø§Ù„Ø­ÙØ¸ ÙÙŠ ÙÙŠØ±Ø¨Ø§Ø³
            db.ref('merchants/' + user).set(merchantData).then(() => {
                alert("ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ ÙˆØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†.");
                closeModal('registerModal');
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙÙˆØ±Ù…
                document.getElementById('step1').style.display = 'block';
                document.getElementById('step2').style.display = 'none';
            });
        }

        function loginMerchant() {
            const user = document.getElementById('loginUser').value;
            const pass = document.getElementById('loginPass').value;

            db.ref('merchants/' + user).once('value', snapshot => {
                if (snapshot.exists()) {
                    const data = snapshot.val();
                    if (data.password == pass) {
                        // Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯Ø®ÙˆÙ„
                        currentUser = data;
                        currentUser.id = user; // Username is the ID
                        sessionStorage.setItem('greenUser', JSON.stringify(currentUser));

                        updateUserUI();
                        closeModal('loginModal');
                        alert("Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ " + data.shopName);
                    } else {
                        alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø© - ØªØ°ÙƒØ± Ø£Ù†Ùƒ Ø¯ÙØ¹Øª 100 Ø¬Ù†ÙŠÙ‡ :)");
                    }
                } else {
                    alert("Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØ¯ÙØ¹ Ø§Ù„Ø±Ø³ÙˆÙ… Ø£ÙˆÙ„Ø§Ù‹.");
                }
            });
        }

        function logout() {
            currentUser = null;
            sessionStorage.removeItem('greenUser');
            document.getElementById('merchantDashboard').style.display = 'none';
            document.getElementById('userGreeting').textContent = 'Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
            alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
        }

        function updateUserUI() {
            document.getElementById('userGreeting').textContent = 'Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ' + currentUser.shopName;
            document.getElementById('merchantDashboard').style.display = 'block';
            document.getElementById('dashTitle').textContent = "Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ…: " + currentUser.shopName;
            renderMyProducts();
        }

        // --- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªØ§Ø¬Ø± (Ø¥Ø¶Ø§ÙØ©/Ø­Ø°Ù Ù…Ù†ØªØ¬Ø§Øª) ---

        function handleProductSubmit(e) {
            e.preventDefault();
            if (!currentUser) return;

            const newProd = {
                id: Date.now(),
                name: document.getElementById('pName').value,
                price: document.getElementById('pPrice').value,
                img: document.getElementById('pImg').value,
                cat: document.getElementById('pCat').value,
                desc: document.getElementById('pDesc').value,
                merchantId: currentUser.id, // Ø±Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„ØªØ§Ø¬Ø±
                shopName: currentUser.shopName,
                merchantPhone: currentUser.phone
            };

            db.ref('products/' + newProd.id).set(newProd).then(() => {
                alert("ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¹Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­!");
                document.getElementById('productForm').reset();
            });
        }

        function renderMyProducts() {
            const list = document.getElementById('myProductsList');
            list.innerHTML = '';
            // ØªØµÙÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø¬Ø± ÙÙ‚Ø·
            const myProds = products.filter(p => p.merchantId === currentUser.id);

            if (myProds.length === 0) {
                list.innerHTML = '<p style="color:#777">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯.</p>';
                return;
            }

            myProds.forEach(p => {
                list.innerHTML += `
                    <div style="display:flex; align-items:center; justify-content:space-between; border-bottom:1px solid #eee; padding:5px;">
                        <div style="display:flex; align-items:center; gap:10px">
                            <img src="${p.img}" style="width:40px; height:40px; border-radius:4px">
                            <span>${p.name}</span>
                        </div>
                        <button onclick="deleteProduct(${p.id})" style="color:red; background:none; border:none; cursor:pointer"><i class="fas fa-trash"></i></button>
                    </div>
                `;
            });
        }

        function deleteProduct(id) {
            if (confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ØŸ")) {
                db.ref('products/' + id).remove();
            }
        }

        // --- Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„Ø´Ø±Ø§Ø¡ (Logic) ---

        function addToCart(id) {
            const prod = products.find(p => p.id == id);
            const exist = cart.find(i => i.id == id);
            if (exist) exist.qty++;
            else cart.push({ ...prod, qty: 1 });
            updateCartUI();
        }

        function updateCartUI() {
            document.getElementById('cartCount').textContent = cart.reduce((a, b) => a + b.qty, 0);
            let html = '';
            let total = 0;
            cart.forEach((item, index) => {
                total += item.price * item.qty;
                html += `
                <div style="display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #eee">
                    <div>${item.name} (${item.qty})<br><small>ØªØ§Ø¬Ø±: ${item.shopName}</small></div>
                    <div>${item.price * item.qty} Ø¬.Ù… <i class="fas fa-times" style="color:red; cursor:pointer" onclick="cart.splice(${index},1);updateCartUI()"></i></div>
                </div>`;
            });
            document.getElementById('cartItems').innerHTML = html || 'Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©';
            document.getElementById('cartTotal').textContent = total;
        }

        function checkout(e) {
            e.preventDefault();
            if (cart.length === 0) { alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©"); return; }

            const name = document.getElementById('cName').value;
            const phone = document.getElementById('cPhone').value;
            const address = document.getElementById('cAddress').value;
            const total = document.getElementById('cartTotal').textContent;

            // ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… (Multi-vendor Ø¨Ø³ÙŠØ·)ØŒ Ø§Ù„Ø·Ù„Ø¨ ÙŠØ°Ù‡Ø¨ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹
            // ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© ØªÙ‚ÙˆÙ… Ø¨ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„ØªØ¬Ø§Ø± Ø£Ùˆ Ø´Ø­Ù†Ù‡Ø§ Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø²Ù† Ø§Ù„Ù…Ø¬Ù…Ø¹Ø©

            let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ù…Ù†ØµØ© GREEN GOLDEN*\n`;
            msg += `ğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${name}\nğŸ“± Ù‡Ø§ØªÙ: ${phone}\nğŸ“ Ø¹Ù†ÙˆØ§Ù†: ${address}\n\n`;
            msg += `ğŸ›’ *Ø§Ù„Ø·Ù„Ø¨Ø§Øª:*\n`;

            cart.forEach(item => {
                msg += `- ${item.name} (Ø¹Ø¯Ø¯ ${item.qty}) | ØªØ§Ø¬Ø±: [${item.shopName}]\n`;
            });

            msg += `\nğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø¬Ù†ÙŠÙ‡*`;

            const encodedMsg = encodeURIComponent(msg);
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ø±Ù‚Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ© (Ø§Ù„Ø°ÙŠ ÙŠØªÙˆÙ„Ù‰ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚)
            window.open(`https://wa.me/${ADMIN_PHONE}?text=${encodedMsg}`, '_blank');

            cart = []; updateCartUI(); closeModal('cartModal');
        }

        // --- Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© ---
        function openModal(id) { document.getElementById(id).style.display = 'flex'; }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        window.onclick = function (e) { if (e.target.classList.contains('modal')) e.target.style.display = 'none'; }
    </script>
</body>

</html>
